<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>إدارة الصيدلية</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
        .card { background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        input { padding: 8px; margin: 5px; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>نظام الصيدلية الذكي</h1>
    
    <div class="card">
        <h3>إضافة منتج جديد</h3>
        <input type="text" id="name" placeholder="اسم الدواء">
        <input type="number" id="price" placeholder="سعر البيع">
        <input type="number" id="stock" placeholder="الكمية">
        <button onclick="addProduct()">إضافة</button>
    </div>

    <div class="card">
        <h3>قائمة الأدوية</h3>
        <ul id="productList"></ul>
    </div>

    <script>
        async function loadProducts() {
            const res = await fetch('http://localhost:3000/products');
            const data = await res.json();
            const list = document.getElementById('productList');
            list.innerHTML = data.map(p => `<li>${p.name} - السعر: ${p.sale_price} - المخزن: ${p.stock}</li>`).join('');
        }

        async function addProduct() {
            const product = {
                name: document.getElementById('name').value,
                sale_price: Number(document.getElementById('price').value),
                stock: Number(document.getElementById('stock').value)
            };
            await fetch('http://localhost:3000/products', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(product)
            });
            loadProducts();
        }
        loadProducts();
    </script>
</body>
</html>

